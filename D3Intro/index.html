<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://pages.cpsc.ucalgary.ca/~nathan.douglas/583/tut2data.js"></script>
    <script src="https://d3js.org/d3.v5.min.js"></script>
</head>
<body>

    <svg id="chart" viewBox="0 0 300 10" preserveAspectRatio="none" width="600" height="300">
        <rect width="100%" height="100%" fill="beige"></rect>
    </svg>

    <svg id="chart2" viewBox="0 0 300 10" preserveAspectRatio="none" width="600" height="300">
        <rect width="100%" height="100%" fill="beige"></rect>
    </svg>

    <svg id="chart3" viewBox="0 0 300 10" preserveAspectRatio="none" width="600" height="300">
        <rect width="100%" height="100%" fill="beige"></rect>
    </svg>

    <div>
        <input Value="Tinder" onclick="makeIndex(0)" type="button">
        <input Value="Text" onclick="makeIndex(1)" type="button">
        <input Value="Drink Alcohol" onclick="makeIndex(2)" type="button">
        <input Value="Share Memes" onclick="makeIndex(3)" type="button">
        <input Value="Flirt" onclick="makeIndex(4)" type="button">
    </div>

    <script>
        let svg1 = document.getElementById("chart");
        let width = svg1.viewBox.baseVal.width;
        let height = svg1.viewBox.baseVal.height;

        let svg2 = document.getElementById("chart2");
        let width2 = svg2.viewBox.baseVal.width;
        let height2 = svg2.viewBox.baseVal.height;



        console.log(data);
        d3.select("#chart").selectAll("#bars").data(data).enter()
            .append("rect").attr("id","bars")
            .attr("x", function (d,i) {
                let barwidth = 300/15;
                return i * barwidth;
            })
            .attr("y", 0)
            .attr("width", function (d,i) {
                let barwidth = 300/15;
                return barwidth;
            })
            .attr("height", function (d) {
                return d[0];
            })
            .attr("fill", "rgb(0,200,255)");

        // second window graph
        d3.select("#chart2").selectAll("#bars").data(data).enter()
            .append("rect").attr("id","bars")
            .attr("x", function (d,i) {
                let barwidth = 300/15;
                return i * barwidth;
            })
            .attr("y", function (d) {
                let barTop = 10 - d[0];
                return barTop;
            })
            .attr("width", function (d,i) {
                let barwidth = 300/15;
                return barwidth;
            })
            .attr("height", function (d) {
                return d[0];
            })
            .attr("fill", "rgb(0,200,255)");

        //dynamic graph changing based on button presses
        function makeIndex(index) {
            let chart = d3.select("#chart3").selectAll("#bars").data(data);

            chart.enter()
                .append("rect").attr("id", "bars")
                .merge(chart).transition()
                .attr("x", function (d, i) {
                    let barwidth = 300 / 15;
                    return i * barwidth;
                })
                .attr("y", function (d) {
                    let barTop = 10 - d[index];
                    return barTop;
                })
                .attr("width", function (d, i) {
                    let barwidth = 300 / 15;
                    return barwidth;
                })
                .attr("height", function (d) {
                    return d[index];
                })
                .attr("fill", "rgb(0,200,255)");
        }
    </script>
</body>
</html>